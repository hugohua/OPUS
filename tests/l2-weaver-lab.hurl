# ============================================
# L2: Weaver Lab ä¸Šä¸‹æ–‡ç”Ÿæˆæµ‹è¯•
# ============================================
# ç«¯ç‚¹: POST /api/weaver/generate
# åŠŸèƒ½: ç”Ÿæˆæ²‰æµ¸å¼å•†åŠ¡ä¸Šä¸‹æ–‡æ•…äº‹ (SSE æµå¼)
# å®‰å…¨: éœ€è¦è®¤è¯ (session cookie)
#
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ğŸ“‹ è§„æ ¼å®šä¹‰ (Specification)
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Input (JSON Body):
#   {
#     "targetWords": string[],  // ç›®æ ‡è¯æ±‡åˆ—è¡¨ (1-5ä¸ª)
#     "scenario": string,       // åœºæ™¯: "business meeting" | "email" | ...
#     "difficulty": number?     // å¯é€‰ï¼Œéš¾åº¦ 1-3
#   }
#
# Output (SSE Stream):
#   Content-Type: text/event-stream
#   
#   data: {"type": "chunk", "content": "..."}
#   data: {"type": "chunk", "content": "..."}
#   data: {"type": "done", "wordCount": 150}
#
# Error Response:
#   401: Unauthorized (æ— è®¤è¯)
#   400: { "error": "Invalid input" }
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# ============================================
# Test 1: æ— è®¤è¯è®¿é—®åº”è¿”å› 401
# ============================================
POST {{BASE_URL}}/api/weaver/generate
Content-Type: application/json
{
    "targetWords": ["TEST_abandon", "TEST_schedule"],
    "scenario": "business meeting"
}

HTTP 401

# ============================================
# Test 2: SSE æµå¼å“åº”æµ‹è¯• (éœ€è¦æœ‰æ•ˆ session)
# ============================================
# æ³¨æ„: æ­¤æµ‹è¯•éœ€è¦æ‰‹åŠ¨é…ç½® session cookie
#       å–æ¶ˆæ³¨é‡Šå¹¶å¡«å…¥æœ‰æ•ˆ token åè¿è¡Œ
#
# POST {{BASE_URL}}/api/weaver/generate
# Content-Type: application/json
# Cookie: next-auth.session-token={{SESSION_TOKEN}}
# {
#     "targetWords": ["TEST_abandon", "TEST_schedule"],
#     "scenario": "business meeting"
# }
# 
# HTTP 200
# [Asserts]
# header "Content-Type" contains "text/event-stream"
